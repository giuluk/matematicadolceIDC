%--------------------------
% Nuovi comandi grafici:

%--------------------------
% Inizializza Tikz con unitÃ  di misura 5mm, e realizza un disegno:
\newcommand{\disegno}[1]{
\begin{tikzpicture}[x=5mm, y=5mm, smooth]
  #1
\end{tikzpicture}
}

\newcommand{\vettoreNOTEXTdraw}[3]{% Disegna un vettore.
  \def \inizio{#1}
  \def \fine{#2}
  \def \parametri{#3}
  \draw [#3] [->] (\inizio) --++ (\fine);
}
% Esempio
% 

\newcommand{\vettoredraw}[4]{% Disegna un vettore con un nome.
  \def \inizio{#1}
  \def \fine{#2}
  \def \etichetta{#3}
  \def \parametri{#4}
  \coordinate [label=$\Vec{\etichetta}$] (v) at ($((\inizio)+0.5*(\fine)$);
  \draw [#4] [->] (\inizio) --++ (\fine);
}
% Esempio
% 

\newcommand{\vettoreABdraw}[5]{% Disegna un vettore con un nome.
  \def \etichettainizio{#1}
  \def \inizio{#2}
  \def \etichettafine{#3}
  \def \fine{#4}
  \def \parametri{#5}
  \coordinate [label=$\Vec{\etichettainizio\etichettafine}$] (N) at 
              ($(0.5*(\inizio)+0.5*(\fine)$);
  \coordinate [label=$\etichettainizio$] (A) at (\inizio);
  \coordinate [label=$\etichettafine$] (B) at (\fine);
  \draw [#5] [->] (\inizio) -- (\fine);
}
% Esempio
% 

\newcommand{\rcom}[5]{% Riferimento Cartesiano Ortogonale Monometrico: x-y.
  %% \disegno{\RCOM{-7}{+7}{-11}{+10}{gray!50, very thin, step=1}}
% \begin{tikzpicture}[x=5mm, y=5mm, smooth]
  \def \xmi{#1}
  \def \xma{#2}
  \def \ymi{#3}
  \def \yma{#4}
  \def \griglia{#5}
\draw[#5] (\xmi-0.3, \ymi-0.3) grid (\xma+0.3, \yma+0.3); % Griglia
\begin{scope}[-{Stealth[length=2mm, open, round]}, black] % Assi
 \draw (\xmi-0.3, 0) -- (\xma+0.3, 0) node [below] {$x$};
 \draw (0, \ymi-0.3) -- (0, \yma+0.3) node [left] {$y$};
\end{scope}
% \end{tikzpicture}

% \newcommand{\RCOM}[5]{% Coordinate cartesiane ortogonali: x-y.
% \begin{tikzpicture}[x=5mm, y=5mm, smooth]
%   \def \xmi{#1}
%   \def \xma{#2}
%   \def \ymi{#3}
%   \def \yma{#4}
%   \def \griglia{#5}
%   \coordinate [label=$x$] (x) at (\xma, 0);     
%   \draw [-{Stealth[length=2mm, open, round]}] (\xmi, 0) -- (\xma, 0);
%   \coordinate [label=$y$] (y) at (0, \yma);	
%   \draw [-{Stealth[length=2mm, open, round]}] (0, \ymi) -- (0, \yma);
%   \draw [#5] (\xmi, \ymi) grid (\xma, \yma);
% \end{tikzpicture}
}
% Esempio
% 

\newcommand{\rcomvario}[7]{% Rif. Cart. Ort. Mon.: v_ind-v_dip.
  %% \disegno{\RCOMvario{0}{6}{0}{6}{gray!50, very thin, step=1}{t}{v}}
  \def \xmi{#1}
  \def \xma{#2}
  \def \ymi{#3}
  \def \yma{#4}
  \def \griglia{#5}
  \def \vind{#6}
  \def \vdip{#7}
  \draw [#5] (\xmi, \ymi) grid (\xma, \yma);
  \coordinate [label=$\vind$] (x) at (\xma, 0);     
  \draw [-{Stealth[length=2mm, open, round]}] (\xmi, 0) -- (\xma, 0);
  \coordinate [label=$\vdip$] (y) at (0, \yma);     
  \draw [-{Stealth[length=2mm, open, round]}] (0, \ymi) -- (0, \yma);
}
Esempio


\newcommand{\testodraw}[3]{% Scrive un testo.
	\def \testo{#1}
	\def \posizione{#2}
	\def \parametri{#3}
	\coordinate [label={ #3 $\testo$}] (T) at (\posizione);
}
% Esempio
% 

\newcommand{\angolodraw}[4]{% Disegna un arco.
	\def \centro{#1}
	\def \angoloi{#2}
	\def \raggio{#3}
	\def \angolof{#4}
	\draw (\centro) ++(\angoloi:\angolof) arc (\angoloi:\raggio:\angolof);
}
% Esempio
% 

\newcommand{\molla}[4]{% Disegna una molla.
	\def \posizione{#1}
	\def \lunghezza{#2}
	\def \ampiezza{#3}
	\def \angolo{#4}
	\draw [rotate=\angolo, shift={(\posizione)}]
	(0,-0.5*\ampiezza) --(0,0.5*\ampiezza);
	\draw plot [variable=\t, domain=45:7245, smooth, rotate=\angolo, 
	shift={(\posizione)}] 
	({\lunghezza*0.0001388*\t}, {\ampiezza*(sin(\t)^2-0.5)});
}
% Esempio
% 